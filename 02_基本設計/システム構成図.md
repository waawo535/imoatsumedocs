

## 4. システム構成図

```
+--------------------------------------------------+
|                   Client Side                    |
+--------------------------------------------------+
|                                                  |
|  +-----------------+  +-----------------------+  |
|  |                 |  |                       |  |
|  | Web Browser     |  | Mobile Web Browser    |  |
|  |                 |  |                       |  |
|  +-----------------+  +-----------------------+  |
|                                                  |
+---------------------------|-----------------------+
                            |
                         HTTPS
                            |
+---------------------------v-----------------------+
|                   Application Server             |
|                                                  |
| +-------------------+   +---------------------+  |
| |                   |   |                     |  |
| | Web Server (Nginx)|   | Spring Boot App     |  |
| |                   |   |                     |  |
| +-------------------+   +---------------------+  |
|            |                        |            |
| +----------v------------+  +--------v---------+  |
| |                       |  |                  |  |
| | Static Content Server |  | Application Tier |  |
| | (HTML/CSS/JS)         |  |                  |  |
| |                       |  +--------+---------+  |
| +-----------------------+           |            |
|                                     |            |
|                          +----------v---------+  |
|                          |                    |  |
|                          | Database Tier      |  |
|                          | (PostgreSQL)       |  |
|                          |                    |  |
|                          +--------------------+  |
|                                                  |
+--------------------------------------------------+
                            |
                            |
              +-------------v--------------+
              |                            |
      +-------v--------+        +----------v------+
      |                |        |                 |
      | File Storage   |        | External APIs   |
      | (S3 or Local)  |        | (Maps, OAuth)   |
      |                |        |                 |
      +----------------+        +-----------------+
```

### 4.1 アプリケーションアーキテクチャ

```
+-----------------------------------------------+
|                                               |
|            Spring Boot Application            |
|                                               |
| +-------------------+ +-------------------+   |
| |                   | |                   |   |
| |    Controllers    | |    Services       |   |
| |                   | |                   |   |
| +-------------------+ +-------------------+   |
|                                               |
| +-------------------+ +-------------------+   |
| |                   | |                   |   |
| |    Repositories   | |    Domain Model   |   |
| |                   | |                   |   |
| +-------------------+ +-------------------+   |
|                                               |
| +-------------------+ +-------------------+   |
| |                   | |                   |   |
| |  Spring Security  | |  External Clients |   |
| |                   | |                   |   |
| +-------------------+ +-------------------+   |
|                                               |
+-----------------------------------------------+
```

### 4.2 データベース関連図

```
+--------------------------------------------------+
|                                                  |
|                PostgreSQL Database               |
|                                                  |
| +------------------+ +----------------------+    |
| |                  | |                      |    |
| |  User Schema     | |  Caterpillar Schema  |    |
| |                  | |                      |    |
| +------------------+ +----------------------+    |
|                                                  |
| +------------------+ +----------------------+    |
| |                  | |                      |    |
| |  Community Schema| |  Game Schema         |    |
| |                  | |                      |    |
| +------------------+ +----------------------+    |
|                                                  |
| +------------------+ +----------------------+    |
| |                  | |                      |    |
| |  Location Schema | |  Notification Schema |    |
| |                  | |                      |    |
| +------------------+ +----------------------+    |
|                                                  |
+--------------------------------------------------+
```

