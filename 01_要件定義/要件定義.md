---

## 2. 要件定義書

### 2.1 プロジェクト概要
「いもかつ」は、現実世界でイモムシを発見・収集し、自分だけの図鑑を作成することを目的としたWebアプリケーションです。ユーザーは屋外で実際のイモムシを見つけ、アプリに記録することで図鑑を充実させるとともに、コミュニティを通じて他のユーザーと交流することができます。

### 2.2 ターゲットユーザー
- 幅広い年齢層（子供から大人まで）
- 自然・生き物に興味がある人
- コレクション要素のあるゲームやアプリが好きな人
- アウトドア活動を楽しむ人
- 昆虫や生態系に関心のある学生・教育者

### 2.3 プラットフォーム要件
- Webブラウザ対応（Chrome, Firefox, Safari, Edge最新版）
- レスポンシブデザイン（PC、タブレット、スマートフォン対応）
- 主要OSサポート（Windows, macOS, iOS, Android）
- PWA（Progressive Web App）対応検討

### 2.4 機能要件

#### 2.4.1 ユーザー管理要件
- ユーザーはメールアドレス、または主要SNSアカウント（Google, Facebook）での登録・ログインが可能
- ユーザープロフィールには、ユーザー名、プロフィール画像、自己紹介、活動統計が表示される
- プライバシー設定により、位置情報やアクティビティの共有レベルを制御可能
- アカウント情報（メールアドレス、パスワード）の変更、アカウント削除が可能
- Spring Securityを活用した認証・認可システムの実装

#### 2.4.2 イモムシ登録・管理要件
- ユーザーはカメラで撮影または写真ライブラリから画像を選択してイモムシを登録可能
- 登録時には、イモムシの種類、発見場所、日時、環境情報などを記録
- 登録されたイモムシはユーザーの個人図鑑に追加され、種類ごとに整理される
- 図鑑では、名前、発見日、レア度などによるソートやフィルタリングが可能
- イモムシの詳細情報画面では、基本情報、生態情報、発見記録、関連情報が閲覧可能

#### 2.4.3 マップ・位置情報要件
- Google Maps API（または同様のマップサービス）を活用したインタラクティブマップの実装
- イモムシの発見位置を地図上に表示
- 過去の発見位置をマップ上にマーカーで表示し、クリックすると詳細情報を確認可能
- 位置情報のプライバシーレベルを「正確な位置」「近隣エリア」「都市レベル」から選択可能
- マップ上での検索、フィルタリング機能により特定の条件に合うイモムシの発見位置を表示

#### 2.4.4 コミュニティ要件
- 発見したイモムシの情報と写真をコミュニティ内で共有可能
- 他ユーザーの投稿に対して「いいね」やコメントが可能
- ユーザー間のフォロー機能により、特定のユーザーの活動を優先表示
- 地域ベースのコミュニティグループで地元の発見情報や交流が可能
- 不適切なコンテンツの報告機能とモデレーションシステムを実装

#### 2.4.5 ゲーム要素要件
- ユーザー活動に応じた経験値獲得とレベルアップシステム
- 特定の条件を達成することで獲得できるバッジ・実績システム
- 季節に応じたイベントの開催と参加機能
- イモムシのレア度分類（コモン、アンコモン、レア、スーパーレア、レジェンド）
- コレクション状況の視覚的な進捗表示

#### 2.4.6 通知・サポート要件
- イベント開始・終了、フォロー中ユーザーの活動、コメント・いいねなどのプッシュ通知
- アプリ内の基本操作を説明するチュートリアル
- よくある質問（FAQ）とヘルプ情報の提供
- 問題報告やサポート要請のためのお問い合わせフォーム
- システム更新やメンテナンス情報のお知らせ機能

#### 2.4.7 システム要件
- ユーザーデータのクラウド同期とバックアップ
- 基本機能のオフライン利用と再接続時の自動同期
- アプリ設定（通知、言語、テーマなど）の管理
- バッテリー消費の最適化と位置情報サービスの効率的利用
- セキュリティ対策（データ暗号化、セキュアな認証など）

### 2.5 非機能要件

#### 2.5.1 パフォーマンス要件
- ページロード時間：3秒以内（ネットワーク環境に依存）
- APIレスポンス時間：500ms以内
- 画像読み込み時間：最適化により2秒以内
- DB問い合わせ：100ms以内
- 同時接続ユーザー数：1000人規模

#### 2.5.2 セキュリティ要件
- ユーザー個人情報の暗号化保存
- HTTPS通信の強制
- Spring Securityを活用した堅牢な認証システム
- CSRFトークン、XSS対策の実装
- GDPR、CCPAなどのプライバシー規制への準拠
- SQL Injection対策

#### 2.5.3 信頼性要件
- システム稼働率：99.5%以上
- バックアップ・リカバリシステムの実装
- エラー発生時の適切なユーザー通知
- データ損失防止策の実施
- 計画的なメンテナンス体制

#### 2.5.4 ユーザビリティ要件
- 直感的なUIデザイン
- アクセシビリティ対応（WCAG 2.1 AA準拠）
- 年齢層に合わせた使いやすさの確保
- 一貫性のあるナビゲーション構造
- レスポンシブデザインによる様々なデバイスでの最適表示

#### 2.5.5 拡張性要件
- マイクロサービスアーキテクチャの検討
- 水平スケーリングが可能なインフラ設計
- 多言語対応の拡張可能性
- RESTful APIによるフロントエンドとの疎結合
- 将来のAI機能追加への対応

### 2.6 制約条件
- 開発期間：初期リリースまで6ヶ月
- 技術スタック：Java + Spring Framework + PostgreSQL
- セキュリティコンプライアンス要件の順守
- データ保存制限と最適化
- ブラウザバージョンの対応範囲

### 2.7 リスク分析
| リスクID | リスク内容 | 影響度 | 対策 |
|----------|------------|--------|------|
| R-001 | ユーザー獲得の遅れ | 高 | マーケティング強化、初期イベント開催 |
| R-002 | データ量の急増によるパフォーマンス低下 | 中 | スケーラブルなインフラ設計、段階的データ取得 |
| R-003 | イモムシデータの正確性・網羅性の課題 | 中 | 専門家監修、ユーザーフィードバック活用 |
| R-004 | 位置情報プライバシーの懸念 | 高 | 詳細な共有設定、プライバシーポリシーの明確化 |
| R-005 | コミュニティ内の不適切コンテンツ | 中 | モデレーションシステム、報告機能強化 |

---